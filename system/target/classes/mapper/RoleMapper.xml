<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sinfeeloo.inventory.mapper.RoleMapper">
    <resultMap id="BaseResultMap" type="com.sinfeeloo.inventory.entity.Role">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Apr 25 17:12:01 CST 2018.
        -->
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="code" jdbcType="VARCHAR" property="code"/>
        <result column="descs" jdbcType="VARCHAR" property="descs"/>
        <result column="menuIds" jdbcType="VARCHAR" property="menuids"/>
        <result column="menuNames" jdbcType="VARCHAR" property="menunames"/>
        <result column="state" jdbcType="INTEGER" property="state"/>
        <result column="updater" jdbcType="VARCHAR" property="updater"/>
        <result column="updatime" jdbcType="TIMESTAMP" property="updatime"/>
        <result column="updatimeStr" jdbcType="VARCHAR" property="updatimeStr"/>
    </resultMap>


    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Apr 25 17:12:01 CST 2018.
        -->
        select id, name, code, descs, menuIds, menuNames, state, updater, updatime
        from lz_sys_role
        where id = #{id,jdbcType=INTEGER}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Apr 25 17:12:01 CST 2018.
        -->
        select id, name, code, descs, menuIds, menuNames, state, updater, updatime
        from lz_sys_role
    </select>


    <!--添加-->
    <insert id="insert" parameterType="com.sinfeeloo.inventory.entity.Role">
    insert into lz_sys_role (id, name, code,
    descs, menuIds, menuNames,
    state, updater, updatime
    )
    values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{code,jdbcType=VARCHAR},
    #{descs,jdbcType=VARCHAR}, #{menuids,jdbcType=VARCHAR}, #{menunames,jdbcType=VARCHAR},
    #{state,jdbcType=INTEGER}, #{updater,jdbcType=VARCHAR}, now()
    )
  </insert>

    <!--通过名称查询该用户是否存在-->
    <select id="selectByName" parameterType="java.lang.String" resultMap="BaseResultMap">
        select id, name, code, descs, menuIds, menuNames, state, updater, updatime
        from lz_sys_role
        where name = #{name,jdbcType=VARCHAR} AND state = 1
    </select>
    <!--分页列表-->
    <select id="selectRoleListByPage" resultMap="BaseResultMap">
        SELECT
        id,
        name,
        code,
        descs,
        menuIds,
        menuNames,
        updater,
        updatime,
        DATE_FORMAT(updatime, '%Y-%m-%d %H:%i:%s') as updatimeStr
        FROM
        lz_sys_role
        WHERE
        state=1
        <if test="roleName != null and roleName!=''">
            AND name LIKE CONCAT ('%',#{roleName},'%' )
        </if>
        <if test="roleCode != null and roleCode!=''">
            AND code =#{roleCode}
        </if>
        ORDER BY ${sortCode} ${sortRole}
        limit #{limit} offset #{offset}
    </select>
    <!--分页数量-->
    <select id="selectRoleCount" resultType="long">
        SELECT
        COUNT(1)
        FROM
        lz_sys_role
        WHERE
        state=1
        <if test="roleName != null and roleName!=''">
            AND name LIKE CONCAT ('%',#{roleName},'%' )
        </if>
        <if test="roleCode != null and roleCode!=''">
            AND code =#{roleCode}
        </if>
    </select>

    <!--修改-->
    <update id="updateByPrimaryKey" parameterType="com.sinfeeloo.inventory.entity.Role">
        update lz_sys_role
        set name = #{name,jdbcType=VARCHAR},
        code = #{code,jdbcType=VARCHAR},
        descs = #{descs,jdbcType=VARCHAR},
        menuIds = #{menuids,jdbcType=VARCHAR},
        menuNames = #{menunames,jdbcType=VARCHAR},
        updater = #{updater,jdbcType=VARCHAR},
        updatime = now()
        where id = #{id,jdbcType=INTEGER}
    </update>

    <!--删除-->
    <update id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        update lz_sys_role
        set state = 0
        where id = #{id,jdbcType=INTEGER}
    </update>

</mapper>